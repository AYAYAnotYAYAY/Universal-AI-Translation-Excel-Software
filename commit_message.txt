feat: Add DeepSeek support, robust batching, and error handling